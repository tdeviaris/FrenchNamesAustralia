<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>French Names Along the Australian Coastline - Story</title>
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon16.png">
    <link rel="stylesheet" href="css/nav.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Garamond:wght@400;700&family=Lato:wght@300;400;700&display=swap');
        :root { --nav-height: 72px; }
        * { box-sizing: border-box; }
        html, body { margin: 0; padding: 0; font-family: 'Inter', 'Lato', sans-serif; color: #1f1f1f; background-color: #f5f5f5; }
        body { padding-top: var(--nav-height); }

        main.story {
            position: relative;
            z-index: 1;
        }
        .scene {
            position: relative;
            min-height: 150vh;
            z-index: 1;
        }
        .scene-media {
            position: fixed;
            top: var(--nav-height);
            left: 0;
            right: 0;
            height: calc(100vh - var(--nav-height));
            background-position: center;
            background-size: cover;
            background-repeat: no-repeat;
            filter: brightness(0.9);
            z-index: 0;
            transition: opacity 0.6s ease-in-out;
        }
        .scene > .scene-media {
            display: none;
        }
        .scene-media::after {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, rgba(0,0,0,0.35) 0%, rgba(0,0,0,0.4) 45%, rgba(0,0,0,0.45) 100%);
        }
        .scene-content {
            max-width: min(700px, 90vw);
            margin: 0 auto;
            padding: clamp(48px, 8vw, 96px) clamp(20px, 6vw, 48px);
            position: relative;
            min-height: 100vh;
            display: flex;
            align-items: center;
            z-index: 10;
        }
        .scene article {
            background: rgba(0, 0, 0, 0.85);
            color: #f5f5f5;
            backdrop-filter: blur(6px);
            padding: clamp(24px, 5vw, 40px);
            border-radius: 0;
            box-shadow: 0 18px 30px rgba(0,0,0,0.16);
            line-height: 1.65;
            width: 100%;
        }
        .scene article h2,
        .scene article h3 {
            color: inherit; /* Inherit the new light color from the article */
        }
        .scene article .source {
            color: #aaa; /* Lighter gray for source text */
        }
        .scene article a {
            color: #89cff0; /* A light blue for links */
        }
        h1 { font-family: 'Inter', 'Lato', sans-serif; font-weight: 700; letter-spacing: -0.02em; font-size: clamp(2.4rem, 5vw, 3.4rem); margin: 0 0 8px; color: #fff; text-shadow: 0 6px 20px rgba(0,0,0,0.45); }
        h2 { font-family: 'Inter', 'Lato', sans-serif; font-size: clamp(1.6rem, 3vw, 2rem); font-weight: 600; margin: 0 0 12px; color: #003b78; text-shadow: none; letter-spacing: normal; }
        h2.illustration-title { font-size: clamp(1.2rem, 2.2vw, 1.5rem); font-weight: 500; }
        h3 { font-family: 'Inter', sans-serif; font-size: clamp(0.9rem, 1.8vw, 1.05rem); font-weight: 400; color: #555; margin: 0 0 16px; line-height: 1.4; }
        .scene article p { margin: 0 0 1.1em; font-size: clamp(0.96rem, 2.4vw, 1.05rem); }
        .scene article p:last-child { margin-bottom: 0; }
        .scene article .source { font-size: 0.9rem; color: #555; }

        .media-hero { background-image: url('img/carte-baudin-zoom.jpg'); }
        .media-beautemps {
            background-image: url('img/carte-de-beautemps-beaupre-1807.jpg');
            background-color: #2a2a2a;
            background-size: contain;
            background-position: center center;
        }
        .media-cap-raoul {
            background-image: url('img/cap-raoul.jpg');
            background-color: #2a2a2a;
            background-size: contain;
            background-position: center center;
        }
        .media-freycinet {
            background-image: url('img/carte-de-freycinet-1812.jpg');
            background-color: #2a2a2a;
            background-size: contain;
            background-position: center center;
        }
        .media-hollande {
            background-image: url('img/nouvelle-hollande-cote-sud-ouest.jpg');
            background-color: #2a2a2a;
            background-size: contain;
            background-position: center center;
        }

        .intro-card {
            background: rgba(0,0,0,0.7);
            color: #f9f9f9;
            padding: clamp(32px, 5vw, 48px) clamp(40px, 8vw, 80px);
            box-shadow: 0 20px 46px rgba(0,0,0,0.5);
            width: 100%;
            text-align: center;
        }
        .intro-card h1 { margin-bottom: 12px; color: #fff; }
        .intro-card p { font-size: clamp(1.05rem, 2.4vw, 1.3rem); margin: 0; color: #f9f9f9; }

        @media (max-width: 768px) {
            .scene article { padding: 24px 22px; }
            .intro-card { padding: 28px 22px; }
        }

        /* Video Introduction Overlay */
        .video-intro-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
            transition: opacity 1.5s ease-out;
        }
        .video-intro-overlay.fade-out {
            opacity: 0;
            pointer-events: none;
        }
        .video-intro-overlay video {
            width: 100%;
            height: 100%;
            object-fit: contain;
            background: #000;
        }
        .video-skip-button {
            position: absolute;
            bottom: 10px;
            right: 40px;
            background: rgba(0, 0, 0, 0.85);
            color: #fff;
            border: 2px solid rgba(255, 255, 255, 0.6);
            padding: 12px 24px;
            font-size: 1rem;
            font-family: 'Lato', sans-serif;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s ease;
            backdrop-filter: blur(4px);
        }
        .video-skip-button:hover {
            background: rgba(0, 0, 0, 0.95);
            border-color: rgba(255, 255, 255, 0.9);
        }
        @media (max-width: 768px) {
            .video-skip-button {
                bottom: 5px;
                right: 20px;
                padding: 8px 16px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- Video Introduction Overlay -->
    <div class="video-intro-overlay" id="video-intro">
        <video id="intro-video" muted playsinline preload="auto" webkit-playsinline poster="img/introduction-poster.jpg?v=20251123">
            <source src="img/introduction.mp4?v=20251123" type="video/mp4">
        </video>
        <button class="video-skip-button" id="skip-video" data-i18n="skip-intro">Skip</button>
    </div>

    <nav>
    <ul>
        <li><a href="index.html" id="nav-home" data-i18n="nav-home">Accueil</a></li>
        <li><a href="map.html" id="nav-map" data-i18n="nav-map">Carte</a></li>
        <li><a href="resources.html" id="nav-resources" data-i18n="nav-resources">Ressources</a></li>
        <li><a href="presentation.html" id="nav-about" data-i18n="nav-about">À propos</a></li>
    </ul>
    <div class="lang-switcher">
        <button type="button" id="lang-fr" title="Passer en Français">
            <img src="img/fr.svg" alt="Français">
        </button>
        <button type="button" id="lang-en" title="Switch to English">
            <img src="img/au.svg" alt="English">
        </button>
    </div>
</nav>

    <main class="story">
        <section class="scene scene--hero">
            <div class="scene-media media-hero"></div>
            <div class="scene-content" style="align-items: flex-end;">
                <div class="intro-card">
                    <h1 data-i18n="hero-title">French Names Along the Australian Coastline</h1>
                    <p data-i18n="hero-subtitle">The toponyms originated by the d'Entrecasteaux (1791-1794) and Baudin (1800-1804) voyages.</p>
                </div>
            </div>
        </section>

        <section class="scene">
            <div class="scene-media media-hero"></div>
            <div class="scene-content">
                <article>
                    <h2 data-i18n="intro-title">Introduction</h2>
                    <p data-i18n="intro-p1">This project explores the distinctive legacy of French place naming along Australia's coastlines, tracing how these toponyms—many still visible on modern maps—reflect the layered histories of European exploration. Set against the backdrop of First Nations peoples' deep and enduring connection to Country, the French naming practices sit alongside those of Dutch and British navigators, forming a complex palimpsest of meaning and memory.</p>
                    <p data-i18n="intro-p2">By focusing on the over 670 sites named during the expeditions of d'Entrecasteaux and Baudin, the study brings to light a unique French perspective that enriches our understanding of Australia's coastal history and its entangled global and local contexts.</p>
                    <p data-i18n="intro-p3-new">Based on 670 place names documented in the official atlases of the d'Entrecasteaux and Baudin expeditions, the project examines these names as historical and cultural signposts that express a French perspective and enrich our understanding of Australia's coastal history.</p>
                </article>
            </div>
        </section>

        <section class="scene">
            <div class="scene-media media-beautemps"></div>
            <div class="scene-content">
                <article>
                    <h2 data-i18n="expedition-dentre-title">L'expédition d'Entrecasteaux</h2>
                    <h3 data-i18n="map-title-beautemps">Carte de Beautemps-Beaupré, 1807</h3>
                    <p data-i18n="expedition-dentre-p1">The first object of the d'Entrecasteaux expedition, the search for the missing Lapérouse, ended in failure. They found no trace of his two ships or their crew on any islands in the western Pacific they sighted. However, the second part of the expedition's mission, the mapping of coasts in the Southern Lands still partially unknown to Europeans, proved highly successful. These discoveries gave hope and motivation to the crew after a difficult crossing of the southern Indian Ocean in rough sea.</p>
                    <p data-i18n="expedition-dentre-p2">The expedition visited the east coasts of Van Diemen's Land (Tasmania) in April–May 1792 and again in late January–February 1793, as well as the south-west coasts of New Holland (Western Australia) in late December 1792–January 1793, bestowing 68 new place names along these shores.</p>
                </article>
            </div>
        </section>

        <section class="scene">
            <div class="scene-media media-cap-raoul"></div>
            <div class="scene-content">
                <article>
                    <h2 class="illustration-title" data-i18n="cap-raoul-title">Cap Raoul</h2>
                    <p data-i18n="cap-raoul-caption">Views of different parts of Van Diemen's Land<br>Piron, Jean &amp; Schoeder &amp; Beautemps-Beaupré, C. F &amp; France.<br>In <em>Atlas du voyage de Bruny d'Entrecasteaux</em> (1807).</p>
                    <p class="source" data-i18n="cap-raoul-source">Source : <a href="http://nla.gov.au/nla.obj-230811235" target="_blank" rel="noopener">National Library of Australia</a></p>
                </article>
            </div>
        </section>

        <section class="scene">
            <div class="scene-media media-freycinet"></div>
            <div class="scene-content">
                <article>
                    <h2 data-i18n="expedition-baudin-title">L'expédition Baudin</h2>
                    <h3 data-i18n="map-title-freycinet">Carte de Freycinet, 1812</h3>
                    <p data-i18n="expedition-baudin-p1">The place names included in the official accounts and atlas of Baudin's voyage of discovery were not assigned during the expedition itself but later, in Paris, between 1806 and 1807 — three years after Baudin's death (16 September 1803) and following the return of the corvettes. By that time, France had entered a new political era: the Napoleonic Empire had replaced the Consulate, the original sponsor of the expedition. The Consulate, in turn, had come to power through the coup of 18 Brumaire (10 November 1799), which overthrew the Directoire — the government under which many scholarly institutions had helped prepare the voyage.</p>
                    <p data-i18n="expedition-baudin-p2">This shifting political landscape left its mark on the expedition's geographical nomenclature. The chosen place names reflect the sequence of these upheavals: some honour the young General Bonaparte, the rising military hero under the Directoire; others pay tribute to the First Consul Bonaparte, who sponsored the expedition; and many more commemorate Emperor Napoléon and members of his imperial family.</p>
                    <p data-i18n="expedition-baudin-p3">The 602 place names selected by Péron and Freycinet vividly illustrate the evolution of the French national spirit during the Napoleonic period, which supplanted the republican ideals that had inspired Baudin and his original nomenclature. Péron and Freycinet favoured names celebrating French figures distinguished in science, literature, military service, or public administration. These individuals embodied the new national narrative — one that sought to unify the country after the deep divisions of the Revolutionary Terror. Indeed, more than eighty per cent of the names commemorate such figures, transforming the map of Australia's coasts into a reflection of France's renewed sense of unity, pride, and imperial ambition.</p>
                </article>
            </div>
        </section>

        <section class="scene">
            <div class="scene-media media-hollande"></div>
            <div class="scene-content">
                <article>
                    <h2 class="illustration-title" data-i18n="southwest-title">Nouvelle-Hollande, côte sud-ouest</h2>
                    <p data-i18n="southwest-caption">Cape Marengo and Cap des Représentations renamed Cap Suffren (Point Grey) — 30 March 1802<br>Ink wash surveys of the coasts of the southern lands by Le Sueur or his assistant Nicolas-Martin Petit.</p>
                    <p class="source" data-i18n="southwest-source">Source : <a href="https://www.siv.archives-nationales.culture.gouv.fr/siv/media/FRAN_IR_054071/c2vb0ou1jo98--clf15o88p7oi/FRAN_0044_02228_L" target="_blank" rel="noopener">Archives nationales de France</a></p>
                </article>
            </div>
        </section>

        <section class="scene">
            <div class="scene-media media-hero"></div>
            <div class="scene-content">
                <article>
                    <h2 data-i18n="nomenclature-title">Contrasting Nomenclatures</h2>
                    <p data-i18n="nomenclature-p1">The d'Entrecasteaux and Baudin nomenclatures produced two contrasting lists of names that reflect the evolving political and cultural changes affecting the French nation from the Revolutionary to the Napoleonic period. In contrast with that of the d'Entrecasteaux expedition, and unparalleled in European voyages of discoveries, the place names chosen by Baudin were not retained by his zoologist François Péron and his officer Louis Freycinet, who, in the absence of their deceased commander, were appointed in Paris at their request as editors of the narrative and the atlases of the voyage. With a few exceptions, when preparing the atlas and narrative between 1805 and 1807, Péron and Freycinet replaced Baudin's names which borrowed mainly from natural history and the voyage with others generally reflecting the French national spirit of the Napoleonic time, when voyages on the high seas and the discovery of distant lands played a less important role in Napoléon's strategy. In contrast, Rossel, who edited the journals of d'Entrecasteaux's voyage, retained all the names his commander had given to locations on Australia's coasts, despite his death during the course of the voyage.</p>
                </article>
            </div>
        </section>
    </main>

    <script src="js/translations.js"></script>
    <script src="js/main.js"></script>
    <script>
        // Gestion du changement d'image de fond lors du scroll avec fondu enchaîné
        const scenes = document.querySelectorAll('.scene');

        // Créer deux couches pour le fondu enchaîné des images de fond
        const backgroundLayer1 = document.createElement('div');
        backgroundLayer1.className = 'scene-media media-hero'; // Set initial background
        backgroundLayer1.style.position = 'fixed';
        backgroundLayer1.style.zIndex = '0';
        backgroundLayer1.style.opacity = '1';
        document.body.insertBefore(backgroundLayer1, document.querySelector('main'));

        const backgroundLayer2 = document.createElement('div');
        backgroundLayer2.className = 'scene-media';
        backgroundLayer2.style.position = 'fixed';
        backgroundLayer2.style.zIndex = '0';
        backgroundLayer2.style.opacity = '0';
        document.body.insertBefore(backgroundLayer2, document.querySelector('main'));

        let currentSceneIndex = -1;
        let activeLayer = backgroundLayer1; // La couche actuellement visible
        let hiddenLayer = backgroundLayer2; // La couche cachée pour préparer la prochaine image
        let isTransitioning = false;

        function updateBackground() {
            if (isTransitioning) return; // Prevent new transitions while one is running

            const scrollTop = window.scrollY;
            let newSceneIndex = -1;

            // Déterminer quelle scène est actuellement visible
            scenes.forEach((scene, index) => {
                const rect = scene.getBoundingClientRect();
                const sceneTop = scene.offsetTop;
                const sceneBottom = sceneTop + scene.offsetHeight;

                if (scrollTop >= sceneTop - 100 && scrollTop < sceneBottom) {
                    newSceneIndex = index;
                }
            });

            // Handle case when scrolling above the first scene
            if (newSceneIndex === -1 && scenes.length > 0 && scrollTop < scenes[0].offsetTop) {
                newSceneIndex = 0;
            }

            // Si la scène a changé, faire un fondu enchaîné
            if (newSceneIndex !== currentSceneIndex && newSceneIndex >= 0) {
                isTransitioning = true; // Lock to prevent overlapping transitions
                currentSceneIndex = newSceneIndex;
                const currentScene = scenes[newSceneIndex];
                const mediaElement = currentScene.querySelector('.scene-media');

                if (mediaElement) {
                    // Préparer la nouvelle image sur la couche cachée
                    hiddenLayer.className = 'scene-media';
                    Array.from(mediaElement.classList).forEach(cls => {
                        if (cls.startsWith('media-')) {
                            hiddenLayer.classList.add(cls);
                        }
                    });

                    // Faire apparaître la nouvelle image en fondu
                    hiddenLayer.style.opacity = '1';

                    // Après la transition, cacher l'ancienne image et échanger les rôles
                    setTimeout(() => {
                        activeLayer.style.opacity = '0';

                        // Échanger les rôles des deux couches
                        const temp = activeLayer;
                        activeLayer = hiddenLayer;
                        hiddenLayer = temp;
                        isTransitioning = false; // Unlock after transition is complete
                    }, 650); // Légèrement après la fin de la transition CSS
                } else {
                    isTransitioning = false; // Unlock if no media found
                }
            }
        }

        // Initialiser dès que possible
        updateBackground();
        window.addEventListener('load', updateBackground);
        window.addEventListener('scroll', updateBackground, { passive: true });
        window.addEventListener('resize', updateBackground);
    </script>

    <script>
        // Video Introduction Logic
        const videoIntro = document.getElementById('video-intro');
        const introVideo = document.getElementById('intro-video');
        const skipButton = document.getElementById('skip-video');
        const mainContent = document.querySelector('main');
        const nav = document.querySelector('nav');

        // Initially hide main content and nav
        if (mainContent) mainContent.style.opacity = '0';
        if (nav) nav.style.opacity = '0';

        let videoIntroEnded = false;

        function endVideoIntro() {
            if (videoIntroEnded) return; // Prevent multiple calls
            videoIntroEnded = true;

            // Show nav immediately (no transition, no white bar)
            if (nav) {
                nav.style.transition = 'none';
                nav.style.opacity = '1';
            }

            // Fade out video overlay
            videoIntro.classList.add('fade-out');

            // After video fade out completes, show main content with fade in
            setTimeout(() => {
                if (mainContent) {
                    mainContent.style.transition = 'opacity 1.5s ease-in';
                    mainContent.style.opacity = '1';
                }
                // Remove the video overlay from DOM after content fade
                setTimeout(() => {
                    videoIntro.remove();
                }, 1500);
            }, 1500);
        }

        // When video ends naturally
        if (introVideo) {
            console.log('Video element found:', introVideo);
            console.log('Video src:', introVideo.querySelector('source')?.src);
            console.log('Video readyState:', introVideo.readyState);

            introVideo.addEventListener('ended', endVideoIntro);

            // Handle video errors
            introVideo.addEventListener('error', (e) => {
                console.error('Video error event:', e);
                console.error('Video error code:', introVideo.error?.code);
                console.error('Video error message:', introVideo.error?.message);
                endVideoIntro();
            });

            // Handle source errors
            const source = introVideo.querySelector('source');
            if (source) {
                source.addEventListener('error', (e) => {
                    console.error('Source error:', e);
                    endVideoIntro();
                });
            }

            // Wait for video to be ready, then try to play
            introVideo.addEventListener('loadedmetadata', () => {
                console.log('✓ Video metadata loaded, duration:', introVideo.duration);
            });

            introVideo.addEventListener('loadeddata', () => {
                console.log('✓ Video data loaded');
            });

            introVideo.addEventListener('canplay', () => {
                console.log('✓ Video can play, attempting to start...');
                // Explicitly try to play the video
                const playPromise = introVideo.play();

                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        console.log('✓ Video is playing successfully');
                    }).catch((error) => {
                        console.error('✗ Autoplay failed:', error);
                        // If autoplay fails, show content immediately
                        endVideoIntro();
                    });
                }
            });

            // Try to load the video
            console.log('Calling video.load()...');
            introVideo.load();
        } else {
            console.error('Video element not found!');
        }

        // Skip button handler
        if (skipButton) {
            skipButton.addEventListener('click', endVideoIntro);
        }

        // Shorter fallback: if video hasn't started after 5 seconds, show content
        setTimeout(() => {
            if (!videoIntroEnded) {
                console.warn('Video intro timeout - showing main content');
                endVideoIntro();
            }
        }, 5000); // 5 second timeout (reduced from 30)
    </script>
</body>
</html>
