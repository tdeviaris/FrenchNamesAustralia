<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Illustrated mission reports - French Names Along the Australian Coastline</title>
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon16.png">
    <link rel="stylesheet" href="css/nav.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Garamond:wght@400;700&family=Lato:wght@300;400&display=swap');
        :root { --nav-height: 72px; --accent: #0056b3; }
        * { box-sizing: border-box; }
        body { font-family: 'Lato', sans-serif; margin: 0; background-color: #999; color: #333; padding-top: var(--nav-height); }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }

        .content-section { background-color: white; padding: clamp(28px, 4vw, 40px); margin-top: 16px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .content-section h1 { font-family: 'Lato', sans-serif; font-size: 2.2rem; font-weight: 700; border-bottom: 2px solid #0056b3; padding-bottom: 10px; margin: 0 0 18px 0; }
        .content-section h1 img { width: 24px; vertical-align: middle; margin-left: 8px; opacity: 0.8; }
        .intro { margin: 0; line-height: 1.6; color: #555; }

	        .entry { margin-top: 26px; }
	        .entry-link { display: inline-flex; align-items: center; justify-content: center; padding: 10px 16px; background-color: #0056b3; color: #fff; border-radius: 999px; border: none; text-decoration: none; font-weight: 600; transition: background-color 0.2s ease; cursor: pointer; font-size: 1rem; }
	        .entry-link:hover { background-color: #003f82; }
	        .entry-description { margin-top: 10px; line-height: 1.6; color: #555; }

            .entry-row { margin-top: 12px; display: flex; gap: 18px; align-items: flex-start; }
            .entry-thumb { width: 250px; flex: 0 0 250px; }
            .entry-thumb button { border: none; padding: 0; background: transparent; cursor: pointer; display: block; width: 100%; }
            .entry-thumb button:focus-visible { outline: 3px solid #FFD700; outline-offset: 6px; border-radius: 12px; }
            .entry-thumb img { width: 100%; height: auto; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.18); display: block; }
            .entry-text { flex: 1; min-width: 0; }
            .entry-text .entry-description { margin-top: 0; }

            @media (max-width: 768px) {
                .entry-row { flex-direction: column; }
                .entry-thumb { width: min(320px, 100%); flex-basis: auto; }
            }

        /* Report modal */
        .report-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: none; align-items: center; justify-content: center; padding: 14px; z-index: 2000; }
        .report-overlay.is-visible { display: flex; }
        .report-container { position: relative; width: 96vw; height: 96vh; max-width: 1400px; }
        .report-container iframe { width: 100%; height: 100%; border: none; border-radius: 10px; background: #fff; box-shadow: 0 12px 48px rgba(0,0,0,0.5); }
        .report-close { position: fixed; top: 16px; right: 16px; width: 44px; height: 44px; border-radius: 50%; border: none; background: rgba(255,255,255,0.95); color: #333; cursor: pointer; font-size: 1.7rem; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 2100; }
        .report-close:hover { background: #f2f2f2; }
        .report-close:focus-visible { outline: 3px solid #FFD700; }

        footer { background: #1f1f1f; color: #fff; text-align: center; padding: 20px; margin-top: 40px; }

        /* Language-specific content blocks */
        [data-lang] { display: none; }
        html[lang^="en"] [data-lang="en"],
        html[lang^="fr"] [data-lang="fr"] { display: block; }
    </style>
</head>
<body>
    <nav>
    <ul>
        <li><a href="index.html" id="nav-home" data-i18n="nav-home">Accueil</a></li>
        <li><a href="map.html" id="nav-map" data-i18n="nav-map">Carte</a></li>
        <li><a href="expert.html" id="nav-ai" data-i18n="nav-ai">Q&R IA</a></li>
        <li><a href="resources.html" id="nav-resources" data-i18n="nav-resources">Ressources</a></li>
        <li><a href="presentation.html" id="nav-about" data-i18n="nav-about">À propos</a></li>
    </ul>
    <div class="lang-switcher">
        <button type="button" id="lang-fr" title="Passer en Français">
            <img src="img/fr.svg" alt="Français">
        </button>
        <button type="button" id="lang-en" title="Switch to English">
            <img src="img/au.svg" alt="English">
        </button>
    </div>
</nav>

    <main class="container">
        <div data-lang="en">
        <section class="content-section">
            <h1>Illustrated mission reports <a href="resources.html"><img src="img/up-arrow.svg" alt="Back to Resources page"></a></h1>
            <p class="intro">Exploration mission reports: authentic texts, illustrated.</p>

	            <div class="entry">
	                <p><button class="entry-link js-report-link" type="button" data-report-fr="details/rapport1F.html" data-report-en="details/rapport1E.html">Port Western</button></p>
                    <div class="entry-row">
                        <div class="entry-thumb">
                            <button type="button" class="js-report-link" data-report-fr="details/rapport1F.html" data-report-en="details/rapport1E.html" aria-label="Open Port Western report">
                                <img src="details/rapport1_html_86122540.jpg" alt="Port Western mission report (thumbnail)" loading="lazy" decoding="async">
                            </button>
                        </div>
                        <div class="entry-text">
                            <p class="entry-description">Report by frigate captain Pierre Milius on his mission in Port Western.</p>
                        </div>
                    </div>
	            </div>
        </section>
        </div>

        <div data-lang="fr">
        <section class="content-section">
            <h1>Les rapports de mission illustrés <a href="resources.html"><img src="img/up-arrow.svg" alt="Retour à la page Ressources"></a></h1>
            <p class="intro">Les rapports de mission des explorations, textes authentiques, illustrés.</p>

	            <div class="entry">
	                <p><button class="entry-link js-report-link" type="button" data-report-fr="details/rapport1F.html" data-report-en="details/rapport1E.html">Port Western</button></p>
                    <div class="entry-row">
                        <div class="entry-thumb">
                            <button type="button" class="js-report-link" data-report-fr="details/rapport1F.html" data-report-en="details/rapport1E.html" aria-label="Ouvrir le rapport Port Western">
                                <img src="details/rapport1_html_86122540.jpg" alt="Rapport de mission Port Western (miniature)" loading="lazy" decoding="async">
                            </button>
                        </div>
                        <div class="entry-text">
                            <p class="entry-description">Rapport du capitaine de frégate Pierre Milius sur sa mission dans le Port Western.</p>
                        </div>
                    </div>
	            </div>
        </section>
        </div>
    </main>

    <div class="report-overlay" role="dialog" aria-modal="true" aria-label="Mission report">
        <div class="report-container">
            <button type="button" class="report-close" aria-label="Close">&times;</button>
            <iframe id="report-frame" title="Mission report" sandbox="allow-same-origin allow-scripts allow-popups allow-forms"></iframe>
        </div>
    </div>

    <div data-include-footer></div>

    <script src="js/translations.js?v=20241012"></script>
    <script src="js/main.js?v=20241012"></script>
    <script>
        (() => {
            const triggers = document.querySelectorAll('.js-report-link[data-report-fr][data-report-en]');
            const overlay = document.querySelector('.report-overlay');
            const frame = document.getElementById('report-frame');
            const closeBtn = document.querySelector('.report-close');
            let lastFocusedElement = null;

            const getCurrentLang = () => (document.documentElement.lang || 'en').toLowerCase();

            const openOverlay = (trigger) => {
                if (!overlay || !frame || !trigger) return;
                const lang = getCurrentLang();
                const reportSrc = lang.startsWith('fr')
                    ? trigger.getAttribute('data-report-fr')
                    : trigger.getAttribute('data-report-en');
                if (!reportSrc) return;

                frame.src = reportSrc;
                overlay.classList.add('is-visible');
                lastFocusedElement = document.activeElement;
                document.body.style.overflow = 'hidden';
                document.addEventListener('keydown', handleKeydown);
                closeBtn?.focus();
            };

            const closeOverlay = () => {
                if (!overlay || !frame) return;
                frame.src = '';
                overlay.classList.remove('is-visible');
                document.body.style.overflow = '';
                document.removeEventListener('keydown', handleKeydown);
                if (lastFocusedElement) {
                    lastFocusedElement.focus();
                }
            };

            const handleKeydown = (event) => {
                if (event.key === 'Escape') {
                    closeOverlay();
                }
            };

            triggers.forEach((trigger) => {
                trigger.addEventListener('click', () => openOverlay(trigger));
            });

            closeBtn?.addEventListener('click', closeOverlay);
            overlay?.addEventListener('click', (event) => {
                if (event.target === overlay) {
                    closeOverlay();
                }
            });
        })();
    </script>
</body>
</html>
