<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resources - French Names Along the Australian Coastline</title>
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon16.png">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Garamond:wght@400;700&family=Lato:wght@300;400&display=swap');
        :root {
            --nav-height: 72px;
        }
        * { box-sizing: border-box; }
        body { 
            font-family: 'Lato', sans-serif; 
            margin: 0; 
            background-color: #f4f4f4; 
            color: #333; 
            padding-top: var(--nav-height);
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        nav {
            background: #1f1f1f;
            color: #fff;
            position: fixed;
            inset: 0 0 auto 0;
            height: var(--nav-height);
            z-index: 1100;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 clamp(18px, 4vw, 40px);
            box-shadow: 0 4px 18px rgba(0,0,0,0.2);
        }
        nav ul { list-style: none; margin: 0; padding: 0; display: flex; gap: clamp(8px, 2vw, 18px); }
        nav ul li a {
            display: block;
            color: inherit;
            text-decoration: none;
            padding: 10px 18px;
            font-size: 1.05rem;
            border-radius: 999px;
            transition: background 0.2s ease, color 0.2s ease;
        }
        nav ul li a.active, nav ul li a:hover { background-color: #0056b3; color: #fff; }
        .lang-switcher {
            position: absolute;
            right: clamp(18px, 4vw, 40px);
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
        }
        .lang-switcher button {
            position: relative;
            background-color: transparent;
            border: none;
            color: inherit;
            cursor: pointer;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.2s ease;
        }
        .lang-switcher button:hover {
            background-color: rgba(0, 86, 179, 0.4);
        }
        .lang-switcher button.active {
            background-color: #0056b3;
        }
        .lang-switcher button.active:hover {
            background-color: #0056b3;
        }
        .lang-switcher button:focus-visible { outline: 2px solid #FFD700; outline-offset: 2px; }
        .lang-switcher button img { display: block; width: 28px; height: auto; }

        @media (max-width: 1040px) {
            :root { --nav-height: 64px; }
            body { padding-top: var(--nav-height); }
            nav { padding: 0 18px; }
            nav ul { gap: 10px; }
            nav ul li a { padding: 8px 14px; font-size: 0.95rem; }
            .lang-switcher { gap: 8px; }
            .lang-switcher button { width: 38px; height: 38px; }
            .lang-switcher button img { width: 22px; }
        }

        @media (max-width: 880px) {
            :root { --nav-height: 60px; }
            body { padding-top: var(--nav-height); }
            nav { padding: 0 14px; }
            nav ul { gap: 8px; }
            nav ul li a { padding: 7px 12px; font-size: 0.9rem; }
            .lang-switcher { gap: 6px; }
            .lang-switcher button { width: 34px; height: 34px; }
            .lang-switcher button img { width: 20px; }
        }
        .content-section { background-color: white; padding: 40px; margin-top: 30px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); min-height: 50vh;}
        .content-section h2 { font-family: 'Lato', sans-serif; font-size: 2.2rem; font-weight: 700; border-bottom: 2px solid #0056b3; padding-bottom: 10px; margin-bottom: 20px; }
        .resource-primary-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 16px;
            background-color: #0056b3;
            color: #fff;
            border-radius: 999px;
            text-decoration: none;
            font-weight: 600;
            transition: background-color 0.2s ease;
        }
        .resource-primary-link:hover { background-color: #003f82; }
        .resource-primary-link:focus-visible { outline: 3px solid #FFD700; outline-offset: 3px; }
        .resource-item { margin-top: 28px; }
        .resource-video-button {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 12px 18px;
            background-color: #0056b3;
            color: #fff;
            border: none;
            border-radius: 999px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.2s ease;
        }
        .resource-video-button:hover { background-color: #003f82; }
        .resource-video-button:focus-visible { outline: 3px solid #FFD700; outline-offset: 3px; }
        .video-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: none; align-items: center; justify-content: center; padding: 20px; z-index: 2000; }
        .video-overlay.is-visible { display: flex; }
        .video-container { position: relative; width: min(90vw, 960px); }
        .video-container video { width: 100%; border-radius: 8px; box-shadow: 0 12px 28px rgba(0,0,0,0.35); background: #000; }
        .video-close { position: absolute; top: 12px; right: 12px; width: 40px; height: 40px; border-radius: 50%; border: none; background: rgba(255,255,255,0.95); color: #333; cursor: pointer; font-size: 1.5rem; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 2; }
        .video-close:hover { background: #f2f2f2; }
        .video-close:focus-visible { outline: 3px solid #FFD700; }
        footer { background: #1f1f1f; color: #fff; text-align: center; padding: 20px; margin-top: 40px; }
        @media (max-width: 768px) {
            :root { --nav-height: 52px; }
            body { padding-top: var(--nav-height); }
            nav {
                height: var(--nav-height);
                padding: 0 8px;
                justify-content: space-between;
                gap: 4px;
            }
            nav ul {
                flex: 1;
                display: flex;
                justify-content: center;
                gap: 4px;
            }
            nav ul li a {
                padding: 4px 8px;
                font-size: 0.75rem;
            }
            .lang-switcher { position: static; gap: 3px; }
            .lang-switcher button { width: 26px; height: 26px; }
            .lang-switcher button img { width: 16px; }
            .content-section { padding: 24px; }
            .content-section h2 { font-size: 1.5rem; }
            .content-section p { font-size: 0.9rem; }
        }
    </style>
</head>
<body>
    <nav>
        <ul>
            <li><a href="index.html" id="nav-home">Home</a></li>
            <li><a href="map_dentrecasteaux.html" id="nav-map-dentre">d'Entrecasteaux</a></li>
            <li><a href="map_baudin.html" id="nav-map-baudin">Baudin</a></li>
            <li><a href="resources.html" class="active" id="nav-resources">Resources</a></li>
        </ul>
        <div class="lang-switcher">
            <button type="button" id="lang-fr" title="Passer en Français">
                <img src="img/fr.svg" alt="Français">
            </button>
            <button type="button" id="lang-en" title="Switch to English">
                <img src="img/au.svg" alt="English">
            </button>
        </div>
    </nav>

    <main class="container">
         <section class="content-section">
            <h2 id="resources-title">Resources</h2>
            <p id="resources-glossary-entry"><a class="resource-primary-link" href="glossaryE.html">Glossary of Terms</a></p>
            <p id="resources-glossary-subtitle">French institutions, political regimes, wars, former country appellations and former scientific expeditions</p>
            <p id="resources-glossary-description">This glossary explains key historical, political and scientific terms mentioned in the project <em>French Names Along the Australian Coastline</em>.</p>
            <div class="resource-item">
                <button id="resources-video-link" class="resource-video-button" type="button" data-video-src="img/Topo1.mp4" data-i18n-aria-label="resources-video-button-aria">Exemple de croquis de profils des côtes</button>
                <p id="resources-video-caption">Vues de différentes parties de la Terre d'Anthony Van Diemen<br>Beautemps-Beaupre, C. F &amp; Collin, E &amp; Beautemps-Beaupre, C. F &amp; France.<br>Ministère de la marine et des colonies. (1807).<br>Source : <a href="https://nla.gov.au/nla.obj-230811126/view" target="_blank" rel="noopener">National Library of Australia</a></p>
            </div>
        </section>
    </main>

    <div class="video-overlay" role="dialog" aria-modal="true" aria-label="Video player" data-i18n-aria-label="resources-video-dialog-label">
        <div class="video-container">
            <button type="button" class="video-close" aria-label="Close" data-i18n-aria-label="resources-video-close-label">&times;</button>
            <video id="resource-video" controls preload="metadata"></video>
        </div>
    </div>

    <div data-include-footer></div>

    <script src="js/translations.js?v=20241012"></script>
    <script src="js/main.js?v=20241012"></script>
    <script>
        (() => {
            const trigger = document.getElementById('resources-video-link');
            const overlay = document.querySelector('.video-overlay');
            const video = document.getElementById('resource-video');
            const closeBtn = document.querySelector('.video-close');
            let lastFocusedElement = null;

            const openOverlay = () => {
                if (!overlay || !video || !trigger) return;
                const videoSrc = trigger.getAttribute('data-video-src');
                if (!videoSrc) return;
                video.src = videoSrc;
                overlay.classList.add('is-visible');
                lastFocusedElement = document.activeElement;
                video.play().catch(() => {});
                document.addEventListener('keydown', handleKeydown);
                closeBtn?.focus();
            };

            const closeOverlay = () => {
                if (!overlay || !video) return;
                video.pause();
                video.currentTime = 0;
                video.removeAttribute('src');
                video.load();
                overlay.classList.remove('is-visible');
                document.removeEventListener('keydown', handleKeydown);
                if (lastFocusedElement) {
                    lastFocusedElement.focus();
                }
            };

            const handleKeydown = (event) => {
                if (event.key === 'Escape') {
                    closeOverlay();
                } else if (event.key === 'Tab' && overlay?.classList.contains('is-visible')) {
                    trapFocus(event);
                }
            };

            const trapFocus = (event) => {
                const focusable = overlay.querySelectorAll('button, video');
                if (!focusable.length) return;
                const first = focusable[0];
                const last = focusable[focusable.length - 1];
                if (event.shiftKey && document.activeElement === first) {
                    event.preventDefault();
                    last.focus();
                } else if (!event.shiftKey && document.activeElement === last) {
                    event.preventDefault();
                    first.focus();
                }
            };

            trigger?.addEventListener('click', openOverlay);
            closeBtn?.addEventListener('click', closeOverlay);
            overlay?.addEventListener('click', (event) => {
                if (event.target === overlay) {
                    closeOverlay();
                }
            });
        })();
    </script>
</body>
</html>
