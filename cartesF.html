<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cartes et illustrations - French Names Along the Australian Coastline</title>
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon16.png">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Garamond:wght@400;700&family=Lato:wght@300;400&display=swap');
        :root { --nav-height: 72px; --accent: #0056b3; }
        * { box-sizing: border-box; }
        body { font-family: 'Lato', sans-serif; margin: 0; background-color: #999; color: #333; padding-top: var(--nav-height); }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        nav { background: #1f1f1f; color: #fff; position: fixed; inset: 0 0 auto 0; height: var(--nav-height); z-index: 1100; display: flex; align-items: center; justify-content: flex-start; padding: 0 clamp(18px, 4vw, 40px); box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
        nav ul { list-style: none; margin: 0; padding: 0; display: flex; gap: clamp(8px, 2vw, 18px); flex: 1; justify-content: center; }
        nav ul li a { display: block; color: inherit; text-decoration: none; padding: 10px 18px; font-size: 1.05rem; border-radius: 999px; transition: background 0.2s ease, color 0.2s ease; }
        nav ul li a.active, nav ul li a:hover { background-color: var(--accent); color: #fff; }
        .lang-switcher { margin-left: auto; display: flex; align-items: center; gap: 12px; font-size: 0.95rem; }
        .lang-switcher button { position: relative; background-color: transparent; border: none; color: inherit; cursor: pointer; width: 44px; height: 44px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: background-color 0.2s ease; }
        .lang-switcher button:hover { background-color: rgba(0, 86, 179, 0.4); }
        .lang-switcher button.active { background-color: var(--accent); }
        .lang-switcher button.active:hover { background-color: var(--accent); }
        .lang-switcher button:focus-visible { outline: 2px solid #FFD700; outline-offset: 2px; }
        .lang-switcher button img { display: block; width: 28px; height: auto; }

        @media (max-width: 1040px) {
            :root { --nav-height: 64px; }
            body { padding-top: var(--nav-height); }
            nav { padding: 0 18px; }
            nav ul { gap: 10px; }
            nav ul li a { padding: 8px 14px; font-size: 0.95rem; }
            .lang-switcher { gap: 8px; }
            .lang-switcher button { width: 38px; height: 38px; }
            .lang-switcher button img { width: 22px; }
        }
        @media (max-width: 880px) {
            :root { --nav-height: 60px; }
            body { padding-top: var(--nav-height); }
            nav { padding: 0 14px; }
            nav ul { gap: 8px; }
            nav ul li a { padding: 7px 12px; font-size: 0.9rem; }
            .lang-switcher { gap: 6px; }
            .lang-switcher button { width: 34px; height: 34px; }
            .lang-switcher button img { width: 20px; }
        }
        .content-section { background-color: white; padding: clamp(28px, 4vw, 40px); margin-top: 30px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .content-section h1 { font-family: 'Lato', sans-serif; font-size: 2.2rem; font-weight: 700; border-bottom: 2px solid #0056b3; padding-bottom: 10px; margin: 0 0 20px 0; }
        .content-section h1 img { width: 24px; vertical-align: middle; margin-left: 8px; opacity: 0.8; }
        .content-section h2.subtitle { font-family: 'Lato', sans-serif; font-weight: 400; font-size: clamp(1.05rem, 2vw, 1.2rem); margin: 0 0 14px 0; color: #444; }
        .entry { margin-bottom: 40px; margin-top: 30px; }
        .entry-title { font-family: 'Lato', sans-serif; font-size: 1.6rem; font-weight: 600; color: var(--accent); margin-bottom: 12px; }
        .entry-link { display: inline-flex; align-items: center; justify-content: center; padding: 10px 16px; background-color: #0056b3; color: #fff; border-radius: 999px; border: none; text-decoration: none; font-weight: 600; transition: background-color 0.2s ease; cursor: pointer; font-size: 1rem; }
        .entry-link:hover { background-color: #003f82; }
        .entry-description { margin-top: 10px; line-height: 1.6; color: #555; }

        /* Modale IIIF */
        .iiif-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); display: none; align-items: center; justify-content: center; padding: 20px; z-index: 2000; }
        .iiif-overlay.is-visible { display: flex; }
        .iiif-container { position: relative; width: 95vw; height: 95vh; }
        .iiif-close { position: fixed; top: 20px; right: 20px; width: 44px; height: 44px; border-radius: 50%; border: none; background: rgba(0,0,0,0.72); color: #fff; cursor: pointer; font-size: 1.6rem; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 20px rgba(0,0,0,0.4); z-index: 2100; }
        .iiif-close:hover { background: #f2f2f2; }
        .iiif-close:focus-visible { outline: 3px solid #FFD700; }

        /* Modale d'images */
        .image-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: none; align-items: center; justify-content: center; padding: 20px; z-index: 2000; }
        .image-overlay.is-visible { display: flex; }
        .image-overlay img { max-width: 90vw; max-height: 90vh; object-fit: contain; border-radius: 8px; box-shadow: 0 12px 48px rgba(0,0,0,0.6); }
        .image-close { position: absolute; top: 20px; right: 20px; width: 48px; height: 48px; border: none; background: rgba(255,255,255,0.95); color: #333; font-size: 28px; cursor: pointer; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 2; }
        .image-close:hover { background: #f2f2f2; }
        .image-close:focus-visible { outline: 3px solid #FFD700; }

        footer { background: #1f1f1f; color: #fff; text-align: center; padding: 20px; margin-top: 40px; }
        @media (max-width: 768px) {
            :root { --nav-height: 52px; }
            body { padding-top: var(--nav-height); }
            nav { height: var(--nav-height); padding: 0 8px; justify-content: space-between; gap: 4px; }
            nav ul { flex: 1; display: flex; justify-content: center; gap: 4px; }
            nav ul li a { padding: 4px 8px; font-size: 0.75rem; }
            .lang-switcher { position: static; gap: 3px; }
            .lang-switcher button { width: 26px; height: 26px; }
            .lang-switcher button img { width: 16px; }
            .content-section { padding: 24px; }
            .page-header h1 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>
    <nav>
        <ul>
            <li><a href="index.html" id="nav-home">Accueil</a></li>
            <li><a href="map_dentrecasteaux.html" id="nav-map-dentre">d'Entrecasteaux</a></li>
            <li><a href="map_baudin.html" id="nav-map-baudin">Baudin</a></li>
            <li><a href="resources.html" class="active" id="nav-resources">Ressources</a></li>
        </ul>
        <div class="lang-switcher">
            <button type="button" id="lang-fr" class="active" title="Passer en Français">
                <img src="img/fr.svg" alt="Français">
            </button>
            <button type="button" id="lang-en" title="Switch to English">
                <img src="img/au.svg" alt="English">
            </button>
        </div>
    </nav>

    <main class="container">
        <section class="content-section">
            <h1>Cartes et illustrations <a href="resources.html"><img src="img/up-arrow.svg" alt="Retour à la page Ressources" style="width:24px; vertical-align:middle; margin-left:8px; opacity:0.8;"></a></h1>
            <h2 class="subtitle">Documentation des expéditions d'Entrecasteaux et Baudin</h2>

            <div class="entry">
                <h3 class="entry-title">Cartes historiques</h3>
                <p><button id="baudin-link" class="entry-link" data-image="img/carte-de-baudin.jpg">Carte de Baudin</button></p>
                <p class="entry-description">Carte issue de l'expédition Baudin (1800-1804), à l'origine de la première carte complète de l'Australie. L'atlas publié comprenait 40 planches ainsi qu'un atlas de 14 cartes et plans documentant les côtes sud et ouest de l'Australie.</p>

                <p><button id="beautemps-link" class="entry-link" data-image="img/carte-de-beautemps-beaupre-1807.jpg">Carte de Beautemps-Beaupré</button></p>
                <p class="entry-description">Carte générale de la Nouvelle-Hollande et des archipels du Grand Océan, dressée en 1807 par Charles-François Beautemps-Beaupré, hydrographe de l'expédition d'Entrecasteaux (1791-1793). Considéré comme le père de l'hydrographie moderne, Beautemps-Beaupré a cartographié les côtes australiennes avec une précision remarquable.</p>

                <p><button id="freycinet-link" class="entry-link" data-image="img/carte-de-freycinet-1812.jpg">Carte de Freycinet</button></p>
                <p class="entry-description">Première carte complète de la Nouvelle-Hollande publiée en 1812 par Louis de Freycinet, issue de l'expédition Baudin. Cette carte a précédé de trois ans la publication de la célèbre carte de Matthew Flinders et reste l'une des représentations les plus emblématiques de l'Australie jamais produites.</p>
            </div>

            <div class="entry">
                <p><button id="voyage-link" class="entry-link">Voyage de découvertes aux terres australes</button></p>
                <p class="entry-description">Voyage de découvertes aux terres australes : exécuté par ordre de Sa Majesté l'empereur et roi, sur les corvettes le Géographe, le Naturaliste, et la goëlette le Casuarina, pendent les années 1800, 1801, 1802, 1803 et 1804; [Historique] publié par decret impérial, sous le ministère de M. de Champagny et rédigé par M. F. Péron.</p>
            </div>
        </section>
    </main>

    <div class="iiif-overlay" role="dialog" aria-modal="true" aria-label="IIIF Viewer">
        <div class="iiif-container">
            <button type="button" class="iiif-close" aria-label="Close">&times;</button>
            <iframe id="iiif-viewer" style="width: 100%; height: 100%; border: none;" sandbox="allow-same-origin allow-scripts allow-popups allow-forms"></iframe>
        </div>
    </div>

    <div class="image-overlay" role="dialog" aria-modal="true" aria-label="Image Viewer">
        <button type="button" class="image-close" aria-label="Close">&times;</button>
        <img id="modal-image" src="" alt="">
    </div>

    <div data-include-footer></div>

    <script src="js/translations.js?v=20241012"></script>
    <script src="js/main.js?v=20241012"></script>
    <script>
        // IIIF Viewer modal
        (() => {
            const voyageLink = document.getElementById('voyage-link');
            const iiifOverlay = document.querySelector('.iiif-overlay');
            const iiifViewer = document.getElementById('iiif-viewer');
            const iiifCloseBtn = document.querySelector('.iiif-close');
            const imageOverlay = document.querySelector('.image-overlay');
            let lastFocusedElement = null;

            const openIIIFOverlay = () => {
                if (!iiifOverlay || !iiifViewer) return;
                iiifViewer.src = 'Viewer.html';
                iiifOverlay.classList.add('is-visible');
                lastFocusedElement = document.activeElement;
                document.body.style.overflow = 'hidden';
                document.addEventListener('keydown', handleIIIFKeydown);
                const closeBtn = iiifOverlay.querySelector('.iiif-close');
                closeBtn?.style.setProperty('position', 'fixed');
                closeBtn?.style.setProperty('top', '20px');
                closeBtn?.style.setProperty('right', '20px');
                closeBtn?.style.setProperty('z-index', '2001');
                closeBtn?.focus();
            };

            const closeIIIFOverlay = () => {
                if (!iiifOverlay || !iiifViewer) return;
                iiifViewer.src = '';
                iiifOverlay.classList.remove('is-visible');
                document.body.style.overflow = '';
                document.removeEventListener('keydown', handleIIIFKeydown);
                if (lastFocusedElement) {
                    lastFocusedElement.focus();
                }
            };

            const handleIIIFKeydown = (event) => {
                if (event.key === 'Escape') {
                    closeIIIFOverlay();
                }
            };

            voyageLink?.addEventListener('click', openIIIFOverlay);
            iiifCloseBtn?.addEventListener('click', closeIIIFOverlay);
            iiifOverlay?.addEventListener('click', (event) => {
                if (event.target === iiifOverlay) {
                    closeIIIFOverlay();
                }
            });
        })();

        // Image modals for maps
        (() => {
            const imageOverlay = document.querySelector('.image-overlay');
            const modalImage = document.getElementById('modal-image');
            const imageCloseBtn = document.querySelector('.image-close');
            const imageButtons = document.querySelectorAll('[data-image]');
            let lastFocusedElement = null;

            const openImageOverlay = (imageSrc) => {
                if (!imageOverlay || !modalImage) return;
                modalImage.src = imageSrc;
                imageOverlay.classList.add('is-visible');
                lastFocusedElement = document.activeElement;
                document.body.style.overflow = 'hidden';
                document.addEventListener('keydown', handleImageKeydown);
                imageCloseBtn?.style.setProperty('position', 'fixed');
                imageCloseBtn?.style.setProperty('top', '20px');
                imageCloseBtn?.style.setProperty('right', '20px');
                imageCloseBtn?.style.setProperty('z-index', '2001');
                imageCloseBtn?.focus();
            };

            const closeImageOverlay = () => {
                if (!imageOverlay || !modalImage) return;
                modalImage.src = '';
                imageOverlay.classList.remove('is-visible');
                document.body.style.overflow = '';
                document.removeEventListener('keydown', handleImageKeydown);
                if (lastFocusedElement) {
                    lastFocusedElement.focus();
                }
            };

            const handleImageKeydown = (event) => {
                if (event.key === 'Escape') {
                    closeImageOverlay();
                }
            };

            imageButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const imageSrc = button.getAttribute('data-image');
                    if (imageSrc) {
                        openImageOverlay(imageSrc);
                    }
                });
            });

            imageCloseBtn?.addEventListener('click', closeImageOverlay);
            imageOverlay?.addEventListener('click', (event) => {
                if (event.target === imageOverlay) {
                    closeImageOverlay();
                }
            });
        })();
    </script>
</body>
</html>
